!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"),require("ua-parser-js"));else if("function"==typeof define&&define.amd)define(["lodash","ua-parser-js"],t);else{var r="object"==typeof exports?t(require("lodash"),require("ua-parser-js")):t(e._,e.uaParser);for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(self,((e,t)=>(()=>{var r={jOia:(e,t)=>{t.DEFAULT_LOCALE="en-US"},AFX1:e=>{e.exports={MOBILE_DEVICE:"mobile",TABLET_DEVICE:"tablet",DESKTOP_DEVICE:"desktop",IOS_OS_NAME:"iOS",ANDROID_OS_NAME:"Android"}},HFvH:(e,t,r)=>{const{MOBILE_DEVICE:o,TABLET_DEVICE:n,IOS_OS_NAME:a,ANDROID_OS_NAME:i}=r("AFX1");e.exports={isMobile:e=>e===o,isTouch:e=>[o,n].includes(e),isIos:e=>e===a,isAndroid:e=>e===i}},"1J0n":(e,t,r)=>{const{DEFAULT_LOCALE:o}=r("jOia");t.Q={locale:o,computedLocale:o,userId:0,country:"",countryCode:"",pageCtxId:"",isPro:!1,abTests:{},userAgent:"",knownCrawler:!1,csrfToken:"",browserLanguage:"",currency:"",pathParameters:{},queryParameters:{},userGuid:"",url:"",ip:"",referrer:"",organizationId:"",experience:{isBuyer:!1,isSeller:!1,isBusiness:!1,value:""},isMobile:!1,isTouch:!1,isIos:!1}},luq0:t=>{"use strict";t.exports=e},glLg:e=>{"use strict";e.exports=t}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return r[e](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";n.r(a);var e=n("luq0"),t=n.n(e);const r="object"==typeof window&&window.window===window&&window||"object"==typeof n.g&&n.g.global===n.g&&n.g||"object"==typeof self&&self.self===self&&self,o=Symbol();const i=Symbol.for("globalEventBus"),s=r[i]=r[i]||new class{constructor(){this[o]=new Map}on(e,t){let r=this[o].get(e);r||(this[o].set(e,new Set),r=this[o].get(e)),r.add(t)}once(e,t){var r=this;const o=function(){r.off(e,o),t(...arguments)};this.on(e,o)}one(e,t){this.has(e)||this.on(e,t)}has(e){return this[o].has(e)}off(e,t){if(!this[o].has(e))return;if(void 0===t)return void this[o].delete(e);const r=this[o].get(e);r.delete(t),0===r.size&&this[o].delete(e)}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const a=this[o].get(e);a&&a.forEach((e=>{e(...r)}))}deferred(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Promise.resolve().then((()=>{this.emit(e,...r)}))}},c="OBS::LOGGER",l="debug",u="verbose",d="info",g="warn",f="error",p="critical",y=[l,u,d,g,f,p],b=y.reduce(((e,t)=>Object.assign(e,{[t]:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.deferred(c,{entity:e,enrichments:r,level:t})}})),{});Object.defineProperty(b,"force",{value:y.reduce(((e,t)=>Object.assign(e,{[t]:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.deferred(c,{entity:e,enrichments:r,level:t,force:true})}})),{})});const m=b;var h=n("glLg"),v=n.n(h),w=n("HFvH");const O=Symbol(),k=(e,t,r)=>{Object.defineProperty(e,t,{value:r,writable:!1,enumerable:!1})},E=t=>{if(t[O])return t;if(!(t=>!!t&&(0,e.isObject)(t)&&!Array.isArray(t))(t))return m.error("FiverrContext computed mixin target is not valid, please contact platform team."),t;const{userAgent:r}=t,o=v()(r),{device:{type:n},os:{name:a}}=o,i={isMobile:w.isMobile(n),isTouch:w.isTouch(n),isIos:w.isIos(a),isAndroid:w.isAndroid(a)};return k(t,O,!0),Object.entries(i).forEach((e=>{let[r,o]=e;return k(t,r,o)})),t};var j=n("1J0n");const _=()=>{const e=t().get(window,"initialData.FiverrContext");return e?E(e):(m.error({message:"Browser context does not exist, please ensure the run time owner sets one on the window scope before using this API"}),j.Q)},S=e=>e.substr(0,2),I={"de-DE":"Deutsch","en-US":"English",es:"Español","fr-FR":"Français","it-IT":"Italiano","nl-NL":"Nederlands","pt-BR":"Português"},x={"en-US":"www","de-DE":"de",es:"es","fr-FR":"fr","pt-BR":"br","it-IT":"it","nl-NL":"nl"},A="en-US",T=(Object.keys(I),S(A)),L={};Object.keys(I).forEach((e=>{const t=e.toUpperCase().replace(/-/g,"_");L[t]=e}));const D=Object.values(x).join("|"),P=(new RegExp("^((".concat(D,")\\.){1,2}(dev\\.){0,1}fiverr.com$")),{ab:"аҧсуа",aa:"Afaraf",af:"Afrikaans",ak:"Akan",sq:"Shqip",am:"አማርኛ",ar:"العربية",an:"Aragonés",hy:"Հայերեն",as:"অসমীয়া",av:"магӀарул мацӀ",ae:"avesta",ay:"aymar aru",az:"azərbaycan dili",bm:"bamanankan",ba:"башҡорт теле",eu:"euskara",be:"Беларуская",bn:"বাংলা",bh:"भोजपुरी",bi:"Bislama",bs:"bosanski jezik",br:"brezhoneg",bg:"български език",my:"ဗမာစာ",ca:"Català",ch:"Chamoru",ce:"нохчийн мотт",ny:"chiCheŵa",zh:"中文 (简体)",cv:"чӑваш чӗлхи",kw:"Kernewek",co:"corsu",cr:"ᓀᐦᐃᔭᐍᐏᐣ",hr:"hrvatski",cs:"čeština",da:"dansk",nl:"Nederlands",en:"English",eo:"Esperanto",et:"eesti keel",ee:"Eʋegbe",fo:"føroyskt",fj:"vosa Vakaviti",fi:"suomen kieli",fr:"Français",ff:"Fulfulde",gl:"Galego",ka:"ქართული",de:"Deutsch",el:"Ελληνικά",gn:"Avañeẽ",gu:"ગુજરાતી",ht:"Kreyòl ayisyen",ha:"Hausa",he:"עברית",hz:"Otjiherero",hi:"हिंदी",ho:"Hiri Motu",hu:"Magyar",ia:"Interlingua",id:"Bahasa Indonesia",ga:"Gaeilge",ig:"Asụsụ Igbo",ik:"Iñupiatun",io:"Ido",is:"Íslenska",it:"Italiano",iu:"ᐃᓄᒃᑎᑐᑦ",ja:"日本語 (にほんご／にっぽんご)",jv:"basa Jawa",jw:"basa Jawa",kl:"kalaallisut",kn:"ಕನ್ನಡ",kr:"Kanuri",ks:"कश्मीरी",kk:"Қазақ тілі",km:"ភាសាខ្មែរ",ki:"Gĩkũyũ",rw:"Ikinyarwanda",ky:"кыргыз тили",kv:"коми кыв",kg:"KiKongo",ko:"한국어",ku:"Kurdî",kj:"Kuanyama",la:"latine",lb:"Lëtzebuergesch",lg:"Luganda",li:"Limburgs",ln:"Lingála",lo:"ພາສາລາວ",lt:"lietuvių kalba",lu:"Kiluba",lv:"latviešu valoda",gv:"Gaelg",mk:"македонски јазик",mg:"Malagasy fiteny",ms:"bahasa Melayu",ml:"മലയാളം",mt:"Malti",mi:"te reo Māori",mr:"मराठी",mh:"Kajin M̧ajeļ",mn:"монгол",na:"Ekakairũ Naoero",nv:"Diné bizaad",nb:"Norsk bokmål",nd:"isiNdebele",ne:"नेपाली",ng:"Owambo",nn:"Norsk nynorsk",no:"Norsk",ii:"ꆈꌠ꒿ Nuosuhxop",nr:"isiNdebele",oc:"Occitan",oj:"ᐊᓂᔑᓈᐯᒧᐎᓐ",om:"Afaan Oromoo",or:"ଓଡ଼ିଆ",os:"ирон æвзаг",pa:"ਪੰਜਾਬੀ",pi:"पाऴि",fa:"فارسی",pl:"Polski",ps:"پښتو",pt:"Português",qu:"Runa Simi",rm:"rumantsch grischun",rn:"kiRundi",ro:"Română",ru:"русский язык",sa:"संस्कृतम्",sc:"sardu",sd:"सिन्धी",se:"Davvisámegiella",sm:"gagana faa Samoa",sg:"yângâ tî sängö",sr:"српски језик",gd:"Gàidhlig",sn:"chiShona",si:"සිංහල",sk:"slovenčina",sl:"slovenščina",so:"Soomaaliga",st:"Sesotho",es:"Español",su:"Basa Sunda",sw:"Kiswahili",ss:"SiSwati",sv:"svenska",ta:"தமிழ்",te:"తెలుగు",tg:"тоҷикӣ",th:"ไทย",ti:"ትግርኛ",bo:"བོད་ཡིག",tk:"Türkmen",tl:"Wikang Tagalog",tn:"Setswana",to:"faka Tonga",tr:"Türkçe",ts:"Xitsonga",tt:"татарча",tw:"Twi",ty:"Reo Tahiti",ug:"Uyƣurqə",uk:"українська",ur:"اردو",uz:"zbek",ve:"Tshivenḓa",vi:"Tiếng Việt",vo:"Volapük",wa:"Walon",cy:"Cymraeg",wo:"Wollof",fy:"Frysk",xh:"isiXhosa",yi:"ייִדיש",yo:"Yorùbá",za:"Saɯ cueŋƅ"}),R=(Object.keys(P),e=>!!P[e]),C={FR:"fr",ES:"es",MX:"es",IT:"it",DE:"de",NL:"nl",BR:"pt",PT:"pt"},M=e=>function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return s.deferred(e,{events:r})},N={send:M("OBS::BIG_QUERY")},B=["translated-ltr","translated-rtl"],z=()=>{const{locale:e,browserLanguage:t,countryCode:r,currency:o,computedLocale:n}=_(),a=(e=>{let{locale:t,browserLanguage:r,countryCode:o}=e,n=T;const a=t&&S(t);if(a!==n&&R(a))n=a;else{const e=r&&S(r);e!==n&&R(e)?n=e:C[o]&&(n=C[o])}return n})({countryCode:r,locale:e,browserLanguage:t});N.send({type:"localization_attributes_per_page",group:"technical_events",domain:{name:"Localization"},localization:{experience_locale:e,visitor_assumed_language:a,display_currency:o,formatting_locale:n}})},F=()=>{if(!window||!window.MutationObserver)return;const e=new MutationObserver((t=>{t.forEach((t=>{let{target:r}=t;if("HTML"!==r.nodeName)return;const o=r;(e=>B.some((t=>e.classList.contains(t))))(o)&&(e.disconnect(),N.send({type:"page_translated_by_extension",group:"user_action",domain:{name:"Localization"},localization:{experience_locale:_().locale,translation_source:"Google Translate",language_after_translation:o.lang}}))}))})),t=window.document.querySelector("html");e.observe(t,{attributes:!0,attributeFilter:["class"]})},q=()=>{z(),F()},K=["count","time","gauge","set","histogram"],G=K.reduce(((e,t)=>Object.assign(e,{[t]:function(e,r,o){let{rate:n,tags:a,enforceRate:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object.entries({prefix:e,metric:r}).forEach(((e,t)=>{let[r,o]=e;if("string"!=typeof o||!o)throw new TypeError("Expected argument ".concat(t," (").concat(r,") to be a string. Instead got ").concat(typeof o," (").concat(o,")"))}));const c=[e,r].join(".");return s.deferred("OBS::STATS",{type:t,key:c,value:o,rate:n,tags:a,enforceRate:i})}})),{});Object.defineProperty(G,"prefix",{value:e=>K.reduce(((t,r)=>Object.assign(t,{[r]:G[r].bind(G,e)})),{})});const U=G,V=U.prefix("services.layout_server"),H=(V.time,V.count);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Q=e=>{return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:e.type,name:e.name,created_at:new Date(e.createdAt).toISOString(),duration:e.duration||null,value:e.value||null},{context_id:(t=e.context).id,user_id:t.userId.toString(),country_code:t.countryCode,browser:t.browserName,locale:t.locale,currency:t.currency,platform:t.platform});var t},W=M("OBS::BIG_QUERY_MONICORE"),Y="monicore",$="mobile_web",Z="web";class ee extends Error{constructor(e){super(e),this.name="ContextNotFoundError"}}const te=Date.now(),re=window.performance&&window.performance.now?window.performance:{now:()=>Date.now()-te,timeOrigin:te},oe=()=>{const{pageCtxId:e,userId:t,countryCode:r,locale:o,isMobile:n,currency:a}=_();return{id:e||"",userId:t||"",countryCode:r||"",locale:o||"",currency:a||"",platform:n?$:Z}},ne="event",ae="error",ie=[ne,ae],se="ADD_EVENT_ERROR",ce="ADD_ERROR_ERROR",le=()=>re.now()+(()=>{let e=re.timeOrigin;return"number"!=typeof e&&(e=re.timing&&re.timing.navigationStart),e})(),ue=t=>!(!(0,e.isUndefined)(t)&&!(0,e.isString)(t))||(m.error("Expected value to be a string. Instead got a ".concat(typeof t),{caughtBy:Y,value:t}),!1),de=t=>!(!(0,e.isString)(t)||(0,e.isEmpty)(t))||(m.error("Expected name to be a string. Instead got a ".concat(typeof t),{caughtBy:Y,name:t}),!1),ge=()=>{U.count("monicore","context_not_found")},fe=e=>(e=>{e.context.isKnownCrawler||W(Q(e))})(e),pe=(e,t)=>{try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ne;if(de(e))if(ie.includes(r)){ue(t)||(t=void 0);try{const o={name:e,value:t,type:r,createdAt:le(),context:oe()};fe(o)}catch(e){e instanceof ee?ge():m.warn(e,{caughtBy:Y,code:se})}}else m.error('Expected "type" to be event or error. Instead got a '.concat(r),{caughtBy:Y,code:se})}(e,t,ae)}catch(e){m.warn(e,{caughtBy:Y,code:ce})}};try{q()}catch(e){((e,t,r)=>{const o="Layout component: ".concat(t,", failed on entry: ").concat(r,"."),n="layout.CSR.".concat(t,".").concat(r);m.error(e,{description:o,componentName:t,entryName:r,package:"@fiverr-private/layout-sdk"}),pe(n),H("layout_component.".concat(t,".error"))})(e,"LocalizationEvent","LocalizationEvent")}})(),a})()));
//# sourceMappingURL=LocalizationEvent.29ad01db299f1a6e2fcf.js.map